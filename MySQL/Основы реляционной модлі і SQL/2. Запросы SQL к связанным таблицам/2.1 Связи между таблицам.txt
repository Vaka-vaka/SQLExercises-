Содержание урока
Средствами SQL запросов можно выбирать и обрабатывать данные не только из одной таблицы,
 но из нескольких связанных таблиц. В данном уроке мы рассмотрим способы соединения таблиц:

связь между таблицами «один ко многим»;
связь между таблицами «многие ко многим»;
создание таблицы с внешними ключами;
действия при удалении записи главной таблицы;
заполнение таблицы с внешними ключами;
добавление данных в таблицу с внешними ключами.
======================================================
Связь «один ко многим»
Рассмотрим таблицу book(в ней столбец author переименован в name_author):

book_id	title	name_author	price	amount
1	Мастер и Маргарита	Булгаков М.А.	670.99	3
2	Белая гвардия	Булгаков М.А.	540.50	5
3	Идиот	Достоевский Ф.М.	460.00	10
4	Братья Карамазовы	Достоевский Ф.М.	799.01	2
5	Стихотворения и поэмы	Есенин С.А.	650.00	15
В этой таблице фамилии авторов повторяются для нескольких книг.
 А что, если придется вместо инициалов для каждого автора хранить
 его полное имя и отчество? Тогда, если в таблице содержится информация
 о 50 книгах Достоевского, придется 50 раз исправлять «Ф.М.» на 
«Федор Михайлович». При этом, если в некоторых записях использовать
 «Фёдор Михайлович» (c буквой ё), то мы вообще получим двух разных авторов... 

Чтобы устранить эту проблему в реляционных базах данных создается 
новая таблица author,  в которой перечисляются все различные авторы,
 а затем эта таблица связывается с таблицей book. При этом такая связь
 называется «один ко многим», таблица author называется главной, 
таблица book – связанной или подчиненной. 

Связь «один ко многим» имеет место, когда одной записи главной 
таблицы соответствует несколько записей связанной таблицы, а 
каждой записи связанной таблицы соответствует только одна запись 
главной таблицы. Обозначается это так:



Этапы реализации связи «один ко многим» на следующем примере:

Один автор может написать несколько книг, а одна книга написана 
только одним автором. Для каждой книги известны ее количество и цена.

1. Создать таблицу author,  в которую включить уникальных авторов книг, хранящихся на складе:



2. Обе таблицы должны содержать первичный ключ, в таблице  bookон уже есть,
  в таблицу authorдобавим ключ author_id:



3. Включить в таблицу book связанный столбец (внешний ключ, FOREIGN KEY),
 соответствующий по имени и типу ключевому столбцу главной таблицы 
(в нашем случае это столбец author_id). Для наглядности связь на схеме
 обозначается стрелкой от ключевого столбца главной таблицы к внешнему ключу связной таблицы:



Задание
Добавить новую характеристику книги – ее жанр, если считать, 
что каждая книга относится к одному жанру, то есть между ними
 определена связь «один ко многим». Расположите в правильном 
порядке этапы связывания таблицы с жанрами (genre) и таблицы book.

Sort a given list
Correct answer from 32,472 learners
Total 75% of tries are correct
 Great!
============================================================

